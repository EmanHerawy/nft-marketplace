const { hexlify, formatBytes32String } = require('ethers/lib/utils')
const contracts= require('../deployments/computedAddreses.json');

// deploy/00_deploy_my_contract.js
module.exports = async ({  deployments ,getNamedAccounts}) => {
  const StartFiMarketPlace = await ethers.getContractFactory('StartFiMarketPlace')
  let StartfiCreate2Deployer = await ethers.getContractFactory('StartfiCreate2Deployer')
  let StartFiStakes = await ethers.getContractFactory('StartFiStakes')
  let StartFiReputation = await ethers.getContractFactory('StartFiReputation')
  const { get,execute } = deployments
   const { deployer } = await getNamedAccounts()

  let create2Deployer = await get('StartfiCreate2Deployer')
  // let stfi_token= await get('StartFiToken');
  //   let stakesContract= await get('StartFiStakes');
  //    let nft_token= await get('StartFiRoyaltyNFT');
  //   let nftoken= await get('StartFiRoyaltyNFT');
  //   let startFi_reputation= await get('StartFiReputation');

  const constructorArgs = ["StartFi Market",contracts.stfiToken,contracts.staking, contracts.reputation,deployer]
  // const constructorArgs = ["StartFi Market",stfi_token.address,stakesContract.address, startFi_reputation.address,deployer]

  

  // 0x19550457F532A47f8B64e1246563e9013DF20260
  // let factoryAddress = "0x19550457F532A47f8B64e1246563e9013DF20260"; // if localhost , deploy first !
  let factoryAddress = create2Deployer.address //'Tp be added' // if localhost , deploy first !

  // if (network.name == `hardhat` || network.name == `localhost`) {
  //   const factoryDeployed = await deploy('AnyNFTCreate2Deployer', {
  //     from: deployer,
  //     args: [],
  //     log: true,
  //   })
  //   factoryAddress = factoryDeployed.address

  //   console.log(factoryAddress, 'factoryAddress')
  // }
  const constructorTypes = [
    'string',
    'address',
    'address',
    'address',
    'address'
  ]
  const optimizedbytecode = `0x60806040526019600655600a600755600a8055600a600b556203f480601155426017553480156200002f57600080fd5b50604051620063b7380380620063b78339810160408190526200005291620003c3565b6002805460ff19169055845181908690869085908390839083908290829085906200008590600390602084019062000300565b5050600580546001600160a01b039384166001600160a01b0319918216179091556004805492909316911617905550620000c5915060009050856200019b565b620000f17fb19546dff01e856fb3f010c267a7b1c60363cf8a4664e21cc89c26224620214e856200019b565b6200011d7f7d867aa9d791a9a4be418f90a2f248aa2c5f1348317792a6f6412f94df9819f7856200019b565b620001497f3b5d4cc60d3ec3516ee8ae083bd60934f6eb2a6c54b1229985c41bfb092b2603856200019b565b5050601680546001600160a01b039384166001600160a01b0319918216179091556001601855600980549690931695169490941790555050612710600c55505061c350600d55506005600e556200053f565b620001b28282620001de60201b62003abe1760201c565b6000828152600160209081526040909120620001d991839062003acc620001ee821b17901c565b505050565b620001ea82826200020e565b5050565b600062000205836001600160a01b038416620002ae565b90505b92915050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff16620001ea576000828152602081815260408083206001600160a01b03851684529091529020805460ff191660011790556200026a3390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054620002f75750815460018181018455600084815260208082209093018490558454848252828601909352604090209190915562000208565b50600062000208565b8280546200030e90620004ec565b90600052602060002090601f0160209004810192826200033257600085556200037d565b82601f106200034d57805160ff19168380011785556200037d565b828001600101855582156200037d579182015b828111156200037d57825182559160200191906001019062000360565b506200038b9291506200038f565b5090565b5b808211156200038b576000815560010162000390565b80516001600160a01b0381168114620003be57600080fd5b919050565b600080600080600060a08688031215620003dc57600080fd5b85516001600160401b0380821115620003f457600080fd5b818801915088601f8301126200040957600080fd5b8151818111156200041e576200041e62000529565b604051601f8201601f19908116603f0116810190838211818310171562000449576200044962000529565b81604052828152602093508b848487010111156200046657600080fd5b600091505b828210156200048a57848201840151818301850152908301906200046b565b828211156200049c5760008484830101525b9850620004ae915050888201620003a6565b95505050620004c060408701620003a6565b9250620004d060608701620003a6565b9150620004e060808701620003a6565b90509295509295909350565b600181811c908216806200050157607f821691505b602082108114156200052357634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052604160045260246000fd5b615e68806200054f6000396000f3fe608060405234801561001057600080fd5b50600436106103ba5760003560e01c806369abe662116101f4578063b3331bee1161011a578063e123ff58116100ad578063eb75c4101161007c578063eb75c41014610a9b578063ec77bb8c14610ae1578063f28c071614610af4578063ffd856ad14610b0757600080fd5b8063e123ff58146109b1578063e1a1d7ed146109c4578063e58378bb14610a5f578063e9c2651814610a7457600080fd5b8063cd772f5c116100e9578063cd772f5c14610965578063d547741f14610978578063d7ad49311461098b578063de74e57b1461099e57600080fd5b8063b3331bee14610919578063b381065b1461092c578063c82f26011461093f578063ca15c8731461095257600080fd5b80638456cb591161019257806391b7f5ed1161016157806391b7f5ed146108d857806391d14854146108eb578063a01a93b3146108fe578063a217fddf1461091157600080fd5b80638456cb59146108955780638ef291e91461089d5780639010d07c146108b2578063913d7ee2146108c557600080fd5b80637b356561116101ce5780637b356561146107c55780637ebed09514610852578063805596a01461086557806383ed80631461086e57600080fd5b806369abe662146107865780636c2c9c7d146107a95780637a59acd2146107b257600080fd5b80633a33ae80116102e457806356e9d1f3116102775780635eec0870116102465780635eec08701461074e578063611d45a2146107615780636298c93a14610774578063649ee6831461077d57600080fd5b806356e9d1f3146106f55780635add4b11146107275780635bbd49f4146107305780635c975abb1461074357600080fd5b80634b3ee2bb116102b35780634b3ee2bb14610581578063504d40fc1461063457806356461e8e146106d957806356abf8d0146106e257600080fd5b80633a33ae801461054a5780633f4ba83a14610553578063421415cc1461055b5780634b046d9b1461056e57600080fd5b80631f78fd0b1161035c57806329c5cdf31161032b57806329c5cdf3146105085780632a6bf14c1461051b5780632f2ff15d1461052457806336568abe1461053757600080fd5b80631f78fd0b1461049657806321ecff5b146104bf578063248a9ca3146104d257806329194964146104f557600080fd5b8063150b7a0211610398578063150b7a021461040e5780631a186227146104455780631d984523146104705780631dee84881461048357600080fd5b806301ffc9a7146103bf57806307008c28146103e757806311a1933c146103fc575b600080fd5b6103d26103cd366004615647565b610b1a565b60405190151581526020015b60405180910390f35b6103fa6103f5366004615544565b610b45565b005b6006545b6040519081526020016103de565b61042c61041c366004615220565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020016103de565b600954610458906001600160a01b031681565b6040516001600160a01b0390911681526020016103de565b61040061047e36600461558d565b610e15565b6103fa6104913660046155af565b610eba565b6104006104a43660046151e6565b6001600160a01b031660009081526008602052604090205490565b6104006104cd36600461558d565b610f27565b6104006104e0366004615544565b60009081526020819052604090206001015490565b6103fa610503366004615544565b610fc2565b6104006105163660046152ce565b611024565b61040060115481565b6103fa61053236600461555d565b611222565b6103fa61054536600461555d565b611249565b610400600d5481565b6103fa61126b565b61040061056936600461536b565b6112cf565b6103fa61057c366004615468565b61133f565b6105ef61058f366004615544565b60009081526015602090815260408083208054600191820154601485528386206001600160a01b03918216808852955292909420908101546002820154600383015460049093015495969495919093169360ff8083169261010090041690565b604080519788526001600160a01b039687166020890152949095169386019390935260608501919091526080840152151560a0830152151560c082015260e0016103de565b610647610642366004615544565b611381565b6040516103de9e9d9c9b9a999897969594939291909d8e526001600160a01b039c8d1660208f015260408e019b909b5260608d019990995260808c019790975294891660a08b01529290971660c0890152151560e08801529415156101008701526101208601949094526101408501939093526101608401929092526101808301919091526101a08201526101c00190565b610400600b5481565b6103fa6106f03660046152ce565b61157d565b610708610703366004615544565b611633565b604080516001600160a01b0390931683526020830191909152016103de565b610400600e5481565b61040061073e366004615303565b611912565b60025460ff166103d2565b6103fa61075c3660046151e6565b611c5e565b61070861076f366004615544565b611d39565b610400600c5481565b610400600a5481565b6103d2610794366004615544565b6000908152600f602052604090205460ff1690565b61040060195481565b6104006107c03660046151e6565b611f94565b6107d86107d3366004615544565b61203b565b604080516001600160a01b039e8f168152602081019d909d528c019a909a5260608b0198909852958a1660808a01529890931660a088015290151560c0870152151560e08601526101008501526101208401949094526101408301939093526101608201929092526101808101919091526101a0016103de565b6103fa6108603660046151e6565b6120dc565b61040060175481565b6104007f7d867aa9d791a9a4be418f90a2f248aa2c5f1348317792a6f6412f94df9819f781565b6103fa6121ad565b6108a561220c565b6040516103de91906157ee565b6104586108c036600461558d565b61229e565b6103fa6108d3366004615671565b6122b6565b6103fa6108e6366004615544565b61234f565b6103d26108f936600461555d565b6123ed565b61070861090c366004615544565b612416565b610400600081565b610400610927366004615403565b6127aa565b61040061093a36600461555d565b612812565b6103fa61094d366004615544565b612a20565b610400610960366004615544565b612af0565b61040061097336600461558d565b612b07565b6103fa61098636600461555d565b612fae565b610708610999366004615544565b612fb8565b6104006109ac366004615544565b61333d565b6107086109bf366004615544565b61335e565b610a266109d236600461555d565b60009182526014602090815260408084206001600160a01b039384168552909152909120805460018201546002830154600384015460049094015492959190941693929160ff808216926101009092041690565b604080519687526001600160a01b03909516602087015293850192909252606084015215156080830152151560a082015260c0016103de565b610400600080516020615e1383398151915281565b6104007f3b5d4cc60d3ec3516ee8ae083bd60934f6eb2a6c54b1229985c41bfb092b260381565b610acc610aa93660046151e6565b6001600160a01b0316600090815260106020526040902080546001909101549091565b604080519283526020830191909152016103de565b610708610aef366004615600565b613797565b6103fa610b02366004615544565b613826565b6103fa610b153660046151e6565b6139ed565b60006001600160e01b03198216635a05180f60e01b1480610b3f5750610b3f82613ae1565b92915050565b610b5d600080516020615e13833981519152336123ed565b610bc55760405162461bcd60e51b815260206004820152602e60248201527f537461727446694d61726b6574506c61636541646d696e3a2063616c6c65722060448201526d6973206e6f74207468652044414f60901b60648201526084015b60405180910390fd5b600081815260156020908152604080832060019081015460138452828520600481015481549190930154600f90955292909420546001600160a01b039485169491821693919092169160ff1615610c775760405162461bcd60e51b815260206004820152603060248201527f537461727466694d61726b6574706c6163653a204465616c20697320616c726560448201526f18591e4819d95d08185c1c1c9bdd995960821b6064820152608401610bbc565b6001600160a01b038416610ccd5760405162461bcd60e51b815260206004820181905260248201527f4d61726b6574706c6163653a2041756374696f6e20686173206e6f20626964736044820152606401610bbc565b600085815260136020526040902060060154421015610d2e5760405162461bcd60e51b815260206004820152601f60248201527f4d61726b6574706c6163653a2041756374696f6e2069732072756e6e696e67006044820152606401610bbc565b60026000868152601360205260409020600a015460ff166003811115610d5657610d56615d97565b14610d735760405162461bcd60e51b8152600401610bbc9061584f565b610d808560006003613b16565b610d8a8585613b89565b50610d9782823086613c45565b610db35760405162461bcd60e51b8152600401610bbc90615b07565b604080516001600160a01b038481168252602082018490528581168284015286166060820152426080820152905186917f8d9c268427de73eba44e74e48a89f612958a81bdc65674e8be0a89c74b0aee9f919081900360a00190a25050505050565b6000610e2f600080516020615e13833981519152336123ed565b610e4b5760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16610e6d5760405162461bcd60e51b8152600401610bbc90615821565b610e778383613cb5565b60408051858152602081018590529192507f4aed3beccf37ae9977a9fce4ed1771b1a6ee2f1c290134080bf2264d58f6e2ca91015b60405180910390a192915050565b610ec8338686868686613d3b565b610f145760405162461bcd60e51b815260206004820152601a60248201527f537461727446693a20496e76616c6964207369676e61747572650000000000006044820152606401610bbc565b610f1d86612fb8565b5050505050505050565b6000610f41600080516020615e13833981519152336123ed565b610f5d5760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16610f7f5760405162461bcd60e51b8152600401610bbc90615821565b610f898383613db7565b60408051858152602081018590529192507f0dba25723c12d14a525942a1f517d05faa831a99752d9e8273a56eb021106b7e9101610eac565b610fda600080516020615e13833981519152336123ed565b610ff65760405162461bcd60e51b8152600401610bbc90615975565b60025460ff166110185760405162461bcd60e51b8152600401610bbc90615821565b61102181613e3d565b50565b600061103260025460ff1690565b1561104f5760405162461bcd60e51b8152600401610bbc906159c5565b816000811161109c5760405162461bcd60e51b815260206004820152601960248201527816995c9bc815985b1d59481a5cc81b9bdd08185b1b1bddd959603a1b6044820152606401610bbc565b601980549060006110ac83615d3c565b919050555084846110ba3390565b6019546040516110d19493929142916020016156d3565b60408051601f198184030181529190528051602090910120601280546001810182556000919091527fbb8a6a4669ba250d26cd7a459eca9d215f8307e33aebe50379bc5a3617ec344401819055915061112a8585613eac565b6111465760405162461bcd60e51b8152600401610bbc90615a4c565b6111538286338787613f3d565b6111985760405162461bcd60e51b8152602060048201526016602482015275436f756c646e2774206c69737420746865206974656d60501b6044820152606401610bbc565b60408051838152336020820152808201859052426060820152905185916001600160a01b038816917f49106c20b85d090f5e277321755f4aa52208129bcbc2940327186f7f7f1c031a9181900360800190a36111fe3386863060008060008060006140eb565b61121a5760405162461bcd60e51b8152600401610bbc90615b07565b509392505050565b61122c82826142f9565b60008281526001602052604090206112449082613acc565b505050565b611253828261431f565b60008281526001602052604090206112449082614399565b611283600080516020615e13833981519152336123ed565b61129f5760405162461bcd60e51b8152600401610bbc90615975565b60025460ff166112c15760405162461bcd60e51b8152600401610bbc90615821565b426017556112cd6143ae565b565b60006112e08c338d8888888861441a565b6113205760405162461bcd60e51b8152602060048201526011602482015270696e76616c6964207369676e617475726560781b6044820152606401610bbc565b61132f8c8c8c8c8c8c8c611912565b9c9b505050505050505050505050565b60005b82518110156112445761136e83828151811061136057611360615dc3565b602002602001015183612812565b508061137981615d3c565b915050611342565b60008060008060008060008060008060008060008060128f815481106113a9576113a9615dc3565b90600052602060002001549d50601360008f815260200190815260200160002060000160009054906101000a90046001600160a01b03169c50601360008f8152602001908152602001600020600101549b50601360008f8152602001908152602001600020600201549a50601360008f8152602001908152602001600020600301549950601360008f815260200190815260200160002060040160009054906101000a90046001600160a01b03169850601360008f815260200190815260200160002060050160009054906101000a90046001600160a01b03169750601360008f815260200190815260200160002060050160149054906101000a900460ff169650601360008f815260200190815260200160002060050160159054906101000a900460ff169550601360008f8152602001908152602001600020600601549450601360008f8152602001908152602001600020600701549350601360008f8152602001908152602001600020600801549250601360008f8152602001908152602001600020600901549150601360008f8152602001908152602001600020600a0160009054906101000a900460ff16600381111561156a5761156a615d97565b905091939597999b9d5091939597999b9d565b611595600080516020615e13833981519152336123ed565b6115b15760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16156115d45760405162461bcd60e51b8152600401610bbc906159c5565b6115df8383836144ca565b604080513381526001600160a01b03851660208201528082018490526060810183905290517ff5c7e6c2b8dc927897290afe37ff3c0df5d40c978875b7588c11d639f990b5499181900360800190a1505050565b60008061164260025460ff1690565b1561165f5760405162461bcd60e51b8152600401610bbc906159c5565b6000838152601360205260409020600a015460ff16600181600381111561168857611688615d97565b14806116a5575060028160038111156116a3576116a3615d97565b145b6117035760405162461bcd60e51b815260206004820152602960248201527f4974656d206973206e6f74206f6e2041756374696f6e206f72204c697374656460448201526820666f722073616c6560b81b6064820152608401610bbc565b600084815260136020526040902060058101546004909101546001600160a01b0391821691163381146117725760405162461bcd60e51b815260206004820152601760248201527621b0b63632b91034b9903737ba103a34329037bbb732b960491b6044820152606401610bbc565b6001600160a01b038216156117c05760405162461bcd60e51b815260206004820152601460248201527320b63932b0b23c903137bab3b43a103a37b5b2b760611b6044820152606401610bbc565b600086815260136020526040902080546001909101546001600160a01b039091169550935060028360038111156117f9576117f9615d97565b141561187757600086815260136020526040812060060154601154909190611822908390614581565b9050428111156118745760405162461bcd60e51b815260206004820152601e60248201527f4e6f74207468652074696d6520746f2044656c6973742061756374696f6e00006044820152606401610bbc565b50505b6118848660006003613b16565b604080518781526001600160a01b0387811660208301528316818301526060810186905242608082015290517f6dc4b575e1450ba0ba61ffb69a8da69f79d671bee33a01783b6a14c469cb7e709181900360a00190a16118ee3086868460008060008060006140eb565b61190a5760405162461bcd60e51b8152600401610bbc90615b07565b505050915091565b600061192060025460ff1690565b1561193d5760405162461bcd60e51b8152600401610bbc906159c5565b856000811161198a5760405162461bcd60e51b815260206004820152601960248201527816995c9bc815985b1d59481a5cc81b9bdd08185b1b1bddd959603a1b6044820152606401610bbc565b61a8c083116119f15760405162461bcd60e51b815260206004820152602d60248201527f41756374696f6e2073686f756c64206265206c69766520666f72206d6f72652060448201526c7468616e20313220686f75727360981b6064820152608401610bbc565b600e54861015611a435760405162461bcd60e51b815260206004820152601e60248201527f496e76616c69642041756374696f6e207175616c69667920416d6f756e7400006044820152606401610bbc565b6000611a4f4285614581565b601980549192506000611a6183615d3c565b91905055508989611a6f3390565b601954604051611a869493929186916020016156d3565b60408051601f198184030181529190528051602090910120601280546001810182556000919091527fbb8a6a4669ba250d26cd7a459eca9d215f8307e33aebe50379bc5a3617ec34440181905592508515611b305787851015611b2b5760405162461bcd60e51b815260206004820152601960248201527f5a65726f207072696365206973206e6f7420616c6c6f776564000000000000006044820152606401610bbc565b611b35565b600094505b611b3f8a8a613eac565b611b5b5760405162461bcd60e51b8152600401610bbc90615a4c565b611b6c838b338c8c8b8b888f61458d565b611bb15760405162461bcd60e51b8152602060048201526016602482015275436f756c646e2774206c69737420746865206974656d60501b6044820152606401610bbc565b604080518481523360208201528082018a905287151560608201526080810187905260a0810183905260c081018990524260e082015290518a916001600160a01b038d16917fd7f1b8f328c218ec2774158bb7329aaa002cda2cb72482f7927b5c1991697f1b918190036101000190a3611c35338b8b3060008060008060006140eb565b611c515760405162461bcd60e51b8152600401610bbc90615b07565b5050979650505050505050565b806001600160a01b038116611c855760405162461bcd60e51b8152600401610bbc90615892565b611c906000336123ed565b611cd25760405162461bcd60e51b81526020600482015260136024820152722ab720baba3437b934bd32b21031b0b63632b960691b6044820152606401610bbc565b601680546001600160a01b0319166001600160a01b038416179055611cf8600083614739565b6040516001600160a01b03831681527f07725cf1e627ba6b8a0d3bde9462e150e033b44fa6f17a31024d141122c1396f906020015b60405180910390a15050565b600080611d4860025460ff1690565b611d645760405162461bcd60e51b8152600401610bbc90615821565b50506000818152601360205260409020600a81015460058201546004830154835460068501546001909501546001600160a01b0391821695909460ff169382169290911690611db03390565b6001600160a01b0316826001600160a01b031614611e0a5760405162461bcd60e51b815260206004820152601760248201527621b0b63632b91034b9903737ba103a34329037bbb732b960491b6044820152606401610bbc565b6001600160a01b03831615611e585760405162461bcd60e51b815260206004820152601460248201527320b63932b0b23c903137bab3b43a103a37b5b2b760611b6044820152606401610bbc565b6001846003811115611e6c57611e6c615d97565b1480611e8957506002846003811115611e8757611e87615d97565b145b611ed55760405162461bcd60e51b815260206004820181905260248201527f416c726561647920626f75676874206f722063616e63656c656420746f6b656e6044820152606401610bbc565b611ee28760006003613b16565b6000878152601360209081526040918290206008015482518a81526001600160a01b038a8116938201939093529185168284015260608201889052608082015260a081018390524260c082015290517f60974777054aa4309a55a645d5dab87017a79bbad06dac2fda24be4d8e3b49969181900360e00190a1611f6f3087878560008060008060006140eb565b611f8b5760405162461bcd60e51b8152600401610bbc90615b07565b50505050915091565b6001600160a01b03818116600081815260086020526040808220546009549151630fa6707960e21b815260048101949094529193919283929190911690633e99c1e49060240160206040518083038186803b158015611ff257600080fd5b505afa158015612006573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061202a91906156ba565b6120349190615ca3565b9392505050565b6000818152601360205260408120805460018201546002830154600380850154600486015460058701546006880154600789015460088a015460098b0154600a909b01546001600160a01b039a8b169c999b989a9699958716989685169760ff600160a01b8704811698600160a81b909704811697959694959394939216908111156120c9576120c9615d97565b905091939597999b9d90929496989a9c50565b806001600160a01b0381166121035760405162461bcd60e51b8152600401610bbc90615892565b61211b600080516020615e13833981519152336123ed565b6121375760405162461bcd60e51b8152600401610bbc90615975565b60025460ff166121595760405162461bcd60e51b8152600401610bbc90615821565b600480546001600160a01b0319166001600160a01b0384161790556040516001600160a01b03831681527fbe3260255e87723bd3e58ffcce4c909c98caadd416e23b7e098070f92fd75bbd90602001611d2d565b6121c5600080516020615e13833981519152336123ed565b6121e15760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16156122045760405162461bcd60e51b8152600401610bbc906159c5565b6112cd614743565b60606003805461221b90615d01565b80601f016020809104026020016040519081016040528092919081815260200182805461224790615d01565b80156122945780601f1061226957610100808354040283529160200191612294565b820191906000526020600020905b81548152906001019060200180831161227757829003601f168201915b5050505050905090565b6000828152600160205260408120612034908361479b565b6122ce600080516020615e13833981519152336123ed565b6122ea5760405162461bcd60e51b8152600401610bbc90615975565b60025460ff1661230c5760405162461bcd60e51b8152600401610bbc90615821565b612315816147a7565b7fe28169ccda724be8baad801e6de41dad86e49186953944c40f68eb91e100ea868160405161234491906157ee565b60405180910390a150565b6123797f7d867aa9d791a9a4be418f90a2f248aa2c5f1348317792a6f6412f94df9819f7336123ed565b6123d55760405162461bcd60e51b815260206004820152602760248201527f537461727446694d61726b6574506c6163653a20556e417574686f72697a65646044820152661031b0b63632b960c91b6064820152608401610bbc565b600e819055600c546123e79082615c84565b600d5550565b6000918252602082815260408084206001600160a01b0393909316845291905290205460ff1690565b60008061242560025460ff1690565b156124425760405162461bcd60e51b8152600401610bbc906159c5565b600083815260136020526040902060060154839042118015612489575060026000828152601360205260409020600a015460ff16600381111561248757612487615d97565b145b6124ea5760405162461bcd60e51b815260206004820152602c60248201527f41756374696f6e206973206e6f7420656e646564206f72206e6f206c6f6e676560448201526b391037b71030bab1ba34b7b760a11b6064820152608401610bbc565b6000848152601560209081526040808320600190810154601390935292206004810154815491909301546001600160a01b039182169650945090811691163382146125775760405162461bcd60e51b815260206004820152601860248201527f43616c6c6572206973206e6f74207468652077696e6e657200000000000000006044820152606401610bbc565b60008681526014602090815260408083206001600160a01b0386168452909152902060030154600d548111156125d5576000878152600f602052604090205460ff166125d55760405162461bcd60e51b8152600401610bbc90615a9d565b806125df846147ba565b10156125fd5760405162461bcd60e51b8152600401610bbc9061590b565b6001600160a01b0382166000908152601060205260408120548190819081901561265f576001600160a01b03861660009081526010602052604090208054600190910154612650918c918c91899161483e565b9296509094509250905061267b565b6126708a8a8760065460075461483e565b929650909450925090505b60008b81526014602090815260408083203384529091528120600401805461ffff191660011790556126b0908c908990613b16565b6126c2338b8b898888888860016140eb565b6126de5760405162461bcd60e51b8152600401610bbc906158c9565b60008b8152601360205260408120600801546126fc918991906148b0565b50612708868887614928565b5060008b8152601560209081526040918290205482519081526001600160a01b038d81169282019290925289821681840152606081018c90526080810188905290861660a082015260c0810185905260e0810184905261010081018390524261012082015290518c917f770608f9b23b449846d60bf6a9fd216b33db427cd5726cf1071d13431143144291908190036101400190a25050505050505050915091565b60006127bb8833898888888861441a565b6127fb5760405162461bcd60e51b8152602060048201526011602482015270696e76616c6964207369676e617475726560781b6044820152606401610bbc565b612806888888611024565b98975050505050505050565b60008281526014602090815260408083206001600160a01b0385811685529252822060010154166128995760405162461bcd60e51b815260206004820152602b60248201527f426964646572206973206e6f742070617274696369706174696e6720696e207460448201526a3434b99030bab1ba34b7b760a91b6064820152608401610bbc565b60008381526014602090815260408083206001600160a01b0386168452909152902060040154610100900460ff166129065760405162461bcd60e51b815260206004820152601060248201526f105b1c9958591e481c995b19585cd95960821b6044820152606401610bbc565b60008381526013602052604090206006015442116129795760405162461bcd60e51b815260206004820152602a60248201527f43616e206e6f742072656c65617365207374616b657320666f722072756e6e6960448201526937339030bab1ba34b7b760b11b6064820152608401610bbc565b6000838152601560205260409020600101546001600160a01b0383811691161415612a165760405162461bcd60e51b815260206004820152604160248201527f57696e6e6572206269646465722063616e20206f6e6c79202072656c6561736560448201527f207374616b65732062792066756c66696c6c696e67207468652061756374696f6064820152603760f91b608482015260a401610bbc565b6120348383613b89565b612a38600080516020615e13833981519152336123ed565b612a545760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16612a765760405162461bcd60e51b8152600401610bbc90615821565b620151808111612abb5760405162461bcd60e51b815260206004820152601060248201526f24b73b30b634b210323ab930ba34b7b760811b6044820152606401610bbc565b60118190556040518181527ff49a73cf36f0d199722739f91a682c327b1e2d3fde466a159e78e0ea0dbbacf890602001612344565b6000818152600160205260408120610b3f906149b8565b6000612b1560025460ff1690565b15612b325760405162461bcd60e51b8152600401610bbc906159c5565b600083815260136020526040902060060154839042108015612b79575060026000828152601360205260409020600a015460ff166003811115612b7757612b77615d97565b145b612bb85760405162461bcd60e51b815260206004820152601060248201526f105d58dd1a5bdb881a5cc8195b99195960821b6044820152606401610bbc565b6000848152601360208181526040808420805460018083015484518087018d90526bffffffffffffffffffffffff19606085811b82168389015233901b166054820152606880820183905286518083039091018152608890910186528051908701208c89526015875294909720015494909352600801549095506001600160a01b039182169392919091169081612cce57600088815260136020526040902060020154871015612cc95760405162461bcd60e51b815260206004820152603660248201527f626964207072696365206d757374206265206d6f7265207468616e206f7220656044820152757175616c20746865206d696e696d756d20707269636560501b6064820152608401610bbc565b612d53565b60008881526014602090815260408083206001600160a01b03861684529091529020600301548711612d535760405162461bcd60e51b815260206004820152602860248201527f626964207072696365206d757374206265206d6f7265207468616e20746865206044820152671b185cdd08189a5960c21b6064820152608401610bbc565b600088815260146020908152604080832033845290915290206003015480612e1e5781612d7f33611f94565b1015612dc35760405162461bcd60e51b81526020600482015260136024820152724e6f7420656e6f75676820726573657276657360681b6044820152606401610bbc565b6000612dd1338460016148b0565b11612e1e5760405162461bcd60e51b815260206004820152601b60248201527f52657365727665205a65726f206973206e6f7420616c6c6f77656400000000006044820152606401610bbc565b612f09878a8733888d6040805180820182528781526001600160a01b03948516602080830182815260008a81526015835285812094518555905160019485018054918a166001600160a01b0319928316179055855160c0810187529b8c529888168b83019081528b860197885260608c0196875260808c0182815260a08d018681529b8352601484528683209483529390925293909320985189559151888201805491909616961695909517909355905160028601555160038501555160049093018054925115156101000261ff00199415159490941661ffff199093169290921792909217905590565b612f445760405162461bcd60e51b815260206004820152600c60248201526b10dbdd5b191b89dd08109a5960a21b6044820152606401610bbc565b604080518881526001600160a01b0387166020820152338183015260608101869052608081018a90524260a082015290518a917f2d4cfcefc09a529d21dfffe1fc49a95663a8e6ee7aa367506e419a6d43788285919081900360c00190a250505050505092915050565b61125382826149c2565b600080612fc760025460ff1690565b15612fe45760405162461bcd60e51b8152600401610bbc906159c5565b60008381526013602052604081206005810154600a9091015460ff600160a81b9092048216929160019116600381111561302057613020615d97565b141561303e57506000848152601360205260409020600201546130e6565b60026000868152601360205260409020600a015460ff16600381111561306657613066615d97565b14156130e657600182151514801561308e575060008581526013602052604090206006015442105b6130d25760405162461bcd60e51b8152602060048201526015602482015274546f6b656e206973206e6f7420666f722073616c6560581b6044820152606401610bbc565b506000848152601360205260409020600901545b6000858152601360205260409020600481015481546001909201546001600160a01b039283169650945016816131845760405162461bcd60e51b815260206004820152603960248201527f537461727466694d61726b6574706c63653a20496e76616c696420707269636560448201527f206f7220546f6b656e206973206e6f7420666f722073616c65000000000000006064820152608401610bbc565b600d548211156131bc576000868152600f602052604090205460ff166131bc5760405162461bcd60e51b8152600401610bbc90615a9d565b816131c6336147ba565b10156131e45760405162461bcd60e51b8152600401610bbc9061590b565b6001600160a01b03811660009081526010602052604081205481908190819015613246576001600160a01b03851660009081526010602052604090208054600190910154613237918b918b918a9161483e565b92965090945092509050613262565b61325789898860065460075461483e565b929650909450925090505b61326e8a336000613b16565b613279853388614928565b50604080516001600160a01b03808c1682523360208301528183018b905260608201899052878116608083015289151560a0830152861660c082015260e08101859052610100810184905261012081018390524261014082015290518b917ff18fd7f8585dc258636a453d4a87ee3dd6edda50c1f438348bddf640ca6fbbec91908190036101600190a2613315338a8a888888888860016140eb565b6133315760405162461bcd60e51b8152600401610bbc906158c9565b50505050505050915091565b6012818154811061334d57600080fd5b600091825260209091200154905081565b60008061336d60025460ff1690565b1561338a5760405162461bcd60e51b8152600401610bbc906159c5565b6000838152601560209081526040808320600101546013909252909120600401546001600160a01b0391821691163381146134075760405162461bcd60e51b815260206004820152601760248201527f4f6e6c792053656c6c65722063616e20646973707574650000000000000000006044820152606401610bbc565b60008581526013602052604090208054600182015460088301546007909301546001600160a01b0392831697509095509084166134865760405162461bcd60e51b815260206004820181905260248201527f4d61726b6574706c6163653a2041756374696f6e20686173206e6f20626964736044820152606401610bbc565b428111156134e75760405162461bcd60e51b815260206004820152602860248201527f4d61726b6574706c6163653a2043616e206e6f742064697370757465206265666044820152676f72652074696d6560c01b6064820152608401610bbc565b426011546017546134f89190615b6d565b106135795760405162461bcd60e51b8152602060048201526044602482018190527f436f6e747261637420686173206a757374656420756e7061757365642c20706c908201527f65617365206769766520746865206269646465722074696d6520746f2066756c606482015263199a5b1b60e21b608482015260a401610bbc565b60026000888152601360205260409020600a015460ff1660038111156135a1576135a1615d97565b146135be5760405162461bcd60e51b8152600401610bbc9061584f565b600d5460008881526014602090815260408083206001600160a01b0389168452909152902060030154111561361b576000878152600f602052604090205460ff1661361b5760405162461bcd60e51b8152600401610bbc90615a9d565b600080613627846149e8565b60165491935091506136449087906001600160a01b031684614a10565b6136605760405162461bcd60e51b8152600401610bbc906159ef565b61366b868683614a10565b6136875760405162461bcd60e51b8152600401610bbc906159ef565b60008981526014602090815260408083206001600160a01b038a1684529091528120600401805461ff00191690556136c290879086906148b0565b506136d08960006003613b16565b6000898152601560209081526040918290205482519081526001600160a01b038b81169282019290925288821681840152606081018a9052908716608082015260a0810186905260c0810183905260e081018490524261010082015290518a917fb46a91724b95c8764d64242653194717e2ab549e1b76e207124d3bddc39aed6d91908190036101200190a26137703089898860008060008060006140eb565b61378c5760405162461bcd60e51b8152600401610bbc90615b07565b505050505050915091565b600085815260146020908152604080832033808552925282206003015482916137c39188888888613d3b565b61380f5760405162461bcd60e51b815260206004820152601a60248201527f537461727446693a20496e76616c6964207369676e61747572650000000000006044820152606401610bbc565b61381887612416565b915091509550959350505050565b61383e600080516020615e13833981519152336123ed565b61385a5760405162461bcd60e51b8152600401610bbc90615975565b60025460ff161561387d5760405162461bcd60e51b8152600401610bbc906159c5565b60026000828152601360205260409020600a015460ff1660038111156138a5576138a5615d97565b14806138d6575060016000828152601360205260409020600a015460ff1660038111156138d4576138d4615d97565b145b6139225760405162461bcd60e51b815260206004820181905260248201527f537461727446694d61726b6574706c6163653a20496e76616c6964206974656d6044820152606401610bbc565b60026000828152601360205260409020600a015460ff16600381111561394a5761394a615d97565b1415613988576000818152601360205260409020600601544211156139885761397542601154614581565b6000828152601360205260409020600701555b6000818152600f60205260409020805460ff19166001179055807f9bfd958891fe06dddc3c7b564113a5fefaa5958db6ec809ab3d39ef6d5e5cc696139ca3390565b604080516001600160a01b0390921682524260208301520160405180910390a250565b806001600160a01b038116613a145760405162461bcd60e51b8152600401610bbc90615892565b613a2c600080516020615e13833981519152336123ed565b613a485760405162461bcd60e51b8152600401610bbc90615975565b60025460ff16613a6a5760405162461bcd60e51b8152600401610bbc90615821565b600580546001600160a01b0319166001600160a01b0384161790556040516001600160a01b03831681527f34ebd4cf402719b97a4e51402bd4a109c70b0b732ce4ead80c769d9d2a427ac090602001611d2d565b613ac88282614a45565b5050565b6000612034836001600160a01b038416614ac9565b60006001600160e01b03198216637965db0b60e01b1480610b3f57506301ffc9a760e01b6001600160e01b0319831614610b3f565b6000838152601360205260409020600a01805482919060ff19166001836003811115613b4457613b44615d97565b02179055506001600160a01b0382161561124457600083815260136020526040902060050180546001600160a01b0384166001600160a01b0319909116179055505050565b6001600160a01b0381166000908152600860208181526040808420548685526013909252832090910154613bbf908490846148b0565b5060008481526014602090815260408083206001600160a01b038716808552908352818420600401805461ff00191690556008835292819020548151938452918301849052820181905242606083015292507f818521a1b12d29402a8e33bac65a0263cfcadaca4429aa2c3831eb4cc2c3d2979060800160405180910390a15092915050565b604051632142170760e11b81526000906001600160a01b038616906342842e0e90613c7890869086908990600401615789565b600060405180830381600087803b158015613c9257600080fd5b505af1158015613ca6573d6000803e3d6000fd5b50600198975050505050505050565b6000613cc18383614b18565b9050673782dace9d9000008111158015613ce35750670de0b6b3a76400008110155b613d2f5760405162461bcd60e51b815260206004820152601f60248201527f50657263656e746167652073686f756c642062652066726f6d20312d342025006044820152606401610bbc565b600a92909255600b5590565b60055460405163d505accf60e01b81526000916001600160a01b03169063d505accf90613d78908a9030908b908b908b908b908b906004016157ad565b600060405180830381600087803b158015613d9257600080fd5b505af1158015613da6573d6000803e3d6000fd5b5060019a9950505050505050505050565b6000613dc38383614b18565b9050673782dace9d9000008111158015613de55750670de0b6b3a76400008110155b613e315760405162461bcd60e51b815260206004820152601f60248201527f50657263656e746167652073686f756c642062652066726f6d20312d342025006044820152606401610bbc565b60069290925560075590565b60008111613ea75760405162461bcd60e51b815260206004820152603160248201527f537461727446694d61726b6574706c6163654361703a20636170206d757374206044820152706265206d6f7265207468616e207a65726f60781b6064820152608401610bbc565b600c55565b60405163020604bf60e21b8152600481018290526000906001600160a01b0384169063081812fc9060240160206040518083038186803b158015613eef57600080fd5b505afa925050508015613f1f575060408051601f3d908101601f19168201909252613f1c91810190615203565b60015b613f2b57506000610b3f565b6001600160a01b031630149050610b3f565b6000604051806101a00160405280866001600160a01b0316815260200184815260200183815260200160008152602001856001600160a01b0316815260200160006001600160a01b0316815260200160001515815260200160001515815260200142815260200160008152602001600081526020016000815260200160016003811115613fcc57613fcc615d97565b9052600087815260136020908152604091829020835181546001600160a01b039182166001600160a01b03199182161783559285015160018084019190915593850151600283015560608501516003808401919091556080860151600484018054918416919095161790935560a085015160058301805460c088015160e08901511515600160a81b0260ff60a81b19911515600160a01b026001600160a81b0319909316949095169390931717919091169190911790556101008401516006820155610120840151600782015561014084015160088201556101608401516009820155610180840151600a8201805492949193909260ff1916919084908111156140d8576140d8615d97565b0217905550600198975050505050505050565b6000600260185414156141405760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c006044820152606401610bbc565b600260185581156142db57601654614163908b906001600160a01b031686614b24565b6141af5760405162461bcd60e51b815260206004820152601f60248201527f436f756c646e2774207472616e7366657220746f6b656e2061732066656573006044820152606401610bbc565b866001600160a01b0316866001600160a01b031614156141da576141d38584615b6d565b925061424a565b6001600160a01b0386161561424a576141f48a8787614b24565b61424a5760405162461bcd60e51b815260206004820152602160248201527f436f756c646e2774207472616e7366657220746f6b656e20746f2069737375656044820152603960f91b6064820152608401610bbc565b6142558a8885614b24565b6142ab5760405162461bcd60e51b815260206004820152602160248201527f436f756c646e2774207472616e7366657220746f6b656e20746f2073656c6c656044820152603960f91b6064820152608401610bbc565b6142b78989308d613c45565b6142d35760405162461bcd60e51b8152600401610bbc90615b07565b5060016142e7565b6142b789898c8a613c45565b60016018559998505050505050505050565b6000828152602081905260409020600101546143158133614b59565b6112448383614a45565b6001600160a01b038116331461438f5760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201526e103937b632b9903337b91039b2b63360891b6064820152608401610bbc565b613ac88282614bbd565b6000612034836001600160a01b038416614c22565b60025460ff166143d05760405162461bcd60e51b8152600401610bbc90615821565b6002805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b600061442588614d15565b156144bb5760405163d505accf60e01b81526001600160a01b0389169063d505accf90614462908a9030908b908b908b908b908b906004016157ad565b602060405180830381600087803b15801561447c57600080fd5b505af1158015614490573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906144b49190615527565b90506144bf565b5060005b979650505050505050565b6001600160a01b038316600090815260106020526040902054156145475760405162461bcd60e51b815260206004820152602e60248201527f537461727446694d61726b6574506c6163655370656369616c4f666665723a2060448201526d105b1c9958591e48195e1a5cda5d60921b6064820152608401610bbc565b60408051808201825292835260208084019283526001600160a01b0390941660009081526010909452909220905181559051600190910155565b60006120348284615b6d565b6000604051806101a001604052808a6001600160a01b0316815260200188815260200187815260200160008152602001896001600160a01b0316815260200160006001600160a01b031681526020016001151581526020018615158152602001848152602001601154856146019190615b6d565b815260208101849052604081018690526060016002905260008b815260136020908152604091829020835181546001600160a01b039182166001600160a01b03199182161783559285015160018084019190915593850151600283015560608501516003808401919091556080860151600484018054918416919095161790935560a085015160058301805460c088015160e08901511515600160a81b0260ff60a81b19911515600160a01b026001600160a81b0319909316949095169390931717919091169190911790556101008401516006820155610120840151600782015561014084015160088201556101608401516009820155610180840151600a8201805492949193909260ff19169190849081111561472257614722615d97565b021790555060019c9b505050505050505050505050565b61122c8282613abe565b60025460ff16156147665760405162461bcd60e51b8152600401610bbc906159c5565b6002805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586143fd3390565b60006120348383614d9f565b8051613ac89060039060208401906150d9565b600554604051636eb1769f60e11b81526001600160a01b038381166004830152306024830152600092169063dd62ed3e9060440160206040518083038186803b15801561480657600080fd5b505afa15801561481a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b3f91906156ba565b60008060008061484f878787614dc9565b915061485b8288615ca3565b905061486689614d15565b156148a457614876898989614dea565b9094509250821580159061489257506001600160a01b03841615155b156148a4576148a18382615ca3565b90505b95509550955095915050565b6000816148e0576001600160a01b0384166000908152600860205260409020546148db908490615ca3565b614904565b6001600160a01b038416600090815260086020526040902054614904908490615b6d565b6001600160a01b038516600090815260086020526040902081905590509392505050565b600480546040516305dbd19960e31b81526000926001600160a01b0390921691632ede8cc89161495e9187918991889101615789565b602060405180830381600087803b15801561497857600080fd5b505af115801561498c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906149b09190615527565b949350505050565b6000610b3f825490565b6000828152602081905260409020600101546149de8133614b59565b6112448383614bbd565b6000806149fd83671bc16d674ec80000614e79565b9150614a098284615ca3565b9050915091565b60095460405163929c517960e01b81526000916001600160a01b03169063929c51799061495e90879087908790600401615789565b614a4f82826123ed565b613ac8576000828152602081815260408083206001600160a01b03851684529091529020805460ff19166001179055614a853390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054614b1057508154600181810184556000848152602080822090930184905584548482528286019093526040902091909155610b3f565b506000610b3f565b60006120348383614e79565b6005546040516323b872dd60e01b81526000916001600160a01b0316906323b872dd9061495e90879087908790600401615789565b614b6382826123ed565b613ac857614b7b816001600160a01b03166014614e91565b614b86836020614e91565b604051602001614b97929190615714565b60408051601f198184030181529082905262461bcd60e51b8252610bbc916004016157ee565b614bc782826123ed565b15613ac8576000828152602081815260408083206001600160a01b0385168085529252808320805460ff1916905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b60008181526001830160205260408120548015614d0b576000614c46600183615ca3565b8554909150600090614c5a90600190615ca3565b9050818114614cbf576000866000018281548110614c7a57614c7a615dc3565b9060005260206000200154905080876000018481548110614c9d57614c9d615dc3565b6000918252602080832090910192909255918252600188019052604090208390555b8554869080614cd057614cd0615dad565b600190038181906000526020600020016000905590558560010160008681526020019081526020016000206000905560019350505050610b3f565b6000915050610b3f565b6040516301ffc9a760e01b815263152a902d60e11b60048201526000906001600160a01b038316906301ffc9a79060240160206040518083038186803b158015614d5e57600080fd5b505afa925050508015614d8e575060408051601f3d908101601f19168201909252614d8b91810190615527565b60015b610b3f57506000919050565b919050565b6000826000018281548110614db657614db6615dc3565b9060005260206000200154905092915050565b60006149b0614de3614ddc846064615c84565b859061502d565b8590615050565b60405163152a902d60e11b8152600481018390526024810182905260009081906001600160a01b03861690632a55205a90604401604080518083038186803b158015614e3557600080fd5b505afa158015614e49573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190614e6d91906152a0565b90969095509350505050565b60006120348383614e8c6012600a615bdc565b615068565b60606000614ea0836002615c84565b614eab906002615b6d565b67ffffffffffffffff811115614ec357614ec3615dd9565b6040519080825280601f01601f191660200182016040528015614eed576020820181803683370190505b509050600360fc1b81600081518110614f0857614f08615dc3565b60200101906001600160f81b031916908160001a905350600f60fb1b81600181518110614f3757614f37615dc3565b60200101906001600160f81b031916908160001a9053506000614f5b846002615c84565b614f66906001615b6d565b90505b6001811115614fde576f181899199a1a9b1b9c1cb0b131b232b360811b85600f1660108110614f9a57614f9a615dc3565b1a60f81b828281518110614fb057614fb0615dc3565b60200101906001600160f81b031916908160001a90535060049490941c93614fd781615cea565b9050614f69565b5083156120345760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e746044820152606401610bbc565b60008161503c6012600a615bdc565b6150469085615c84565b6120349190615b85565b600061203483836150636012600a615bdc565b6150c1565b6000808361507784600a615c84565b6150819087615c84565b61508b9190615b85565b9050600561509a600a83615d57565b106150ad576150aa600a82615b6d565b90505b6150b8600a82615b85565b95945050505050565b6000806150cf600a84615b85565b6150818587615c84565b8280546150e590615d01565b90600052602060002090601f016020900481019282615107576000855561514d565b82601f1061512057805160ff191683800117855561514d565b8280016001018555821561514d579182015b8281111561514d578251825591602001919060010190615132565b5061515992915061515d565b5090565b5b80821115615159576000815560010161515e565b600067ffffffffffffffff83111561518c5761518c615dd9565b61519f601f8401601f1916602001615b3c565b90508281528383830111156151b357600080fd5b828260208301376000602084830101529392505050565b8035614d9a81615def565b803560ff81168114614d9a57600080fd5b6000602082840312156151f857600080fd5b813561203481615def565b60006020828403121561521557600080fd5b815161203481615def565b6000806000806080858703121561523657600080fd5b843561524181615def565b9350602085013561525181615def565b925060408501359150606085013567ffffffffffffffff81111561527457600080fd5b8501601f8101871361528557600080fd5b61529487823560208401615172565b91505092959194509250565b600080604083850312156152b357600080fd5b82516152be81615def565b6020939093015192949293505050565b6000806000606084860312156152e357600080fd5b83356152ee81615def565b95602085013595506040909401359392505050565b600080600080600080600060e0888a03121561531e57600080fd5b873561532981615def565b9650602088013595506040880135945060608801359350608088013561534e81615e04565b9699959850939692959460a0840135945060c09093013592915050565b60008060008060008060008060008060006101608c8e03121561538d57600080fd5b8b3561539881615def565b9a5060208c0135995060408c0135985060608c0135975060808c01356153bd81615e04565b965060a08c0135955060c08c0135945060e08c013593506153e16101008d016151d5565b92506101208c013591506101408c013590509295989b509295989b9093969950565b600080600080600080600060e0888a03121561541e57600080fd5b873561542981615def565b965060208801359550604088013594506060880135935061544c608089016151d5565b925060a0880135915060c0880135905092959891949750929550565b6000806040838503121561547b57600080fd5b823567ffffffffffffffff8082111561549357600080fd5b818501915085601f8301126154a757600080fd5b81356020828211156154bb576154bb615dd9565b8160051b92506154cc818401615b3c565b8281528181019085830185870184018b10156154e757600080fd5b600096505b8487101561550a5780358352600196909601959183019183016154ec565b50965061551a90508782016151ca565b9450505050509250929050565b60006020828403121561553957600080fd5b815161203481615e04565b60006020828403121561555657600080fd5b5035919050565b6000806040838503121561557057600080fd5b82359150602083013561558281615def565b809150509250929050565b600080604083850312156155a057600080fd5b50508035926020909101359150565b60008060008060008060c087890312156155c857600080fd5b8635955060208701359450604087013593506155e6606088016151d5565b92506080870135915060a087013590509295509295509295565b600080600080600060a0868803121561561857600080fd5b853594506020860135935061562f604087016151d5565b94979396509394606081013594506080013592915050565b60006020828403121561565957600080fd5b81356001600160e01b03198116811461203457600080fd5b60006020828403121561568357600080fd5b813567ffffffffffffffff81111561569a57600080fd5b8201601f810184136156ab57600080fd5b6149b084823560208401615172565b6000602082840312156156cc57600080fd5b5051919050565b6bffffffffffffffffffffffff19606096871b8116825260148201959095529290941b90921660348201526048810191909152606881019190915260880190565b7f416363657373436f6e74726f6c3a206163636f756e742000000000000000000081526000835161574c816017850160208801615cba565b7001034b99036b4b9b9b4b733903937b6329607d1b601791840191820152835161577d816028840160208801615cba565b01602801949350505050565b6001600160a01b039384168152919092166020820152604081019190915260600190565b6001600160a01b0397881681529590961660208601526040850193909352606084019190915260ff16608083015260a082015260c081019190915260e00190565b602081526000825180602084015261580d816040850160208701615cba565b601f01601f19169190910160400192915050565b60208082526014908201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604082015260600190565b60208082526023908201527f4d61726b6574706c6163653a204974656d206973206e6f74206f6e204175637460408201526234b7b760e91b606082015260800190565b6020808252601b908201527f5a65726f2061646472657373206973206e6f7420616c6c6f7765640000000000604082015260600190565b60208082526022908201527f537461727446693a20636f756c64206e6f7420657863757465207472616e736660408201526132b960f11b606082015260800190565b60208082526044908201527f4d61726b6574706c616365206973206e6f7420616c6c6f77656420746f20776960408201527f7468647261772074686520726571756972656420616d6f756e74206f6620746f6060820152636b656e7360e01b608082015260a00190565b60208082526030908201527f537461727446694d61726b6574506c61636541646d696e3a2063616c6c65722060408201526f34b9903737ba103a34329037bbb732b960811b606082015260800190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b6020808252603a908201527f4d61726b6574706c6163653a20636f756c646e2774206465647563742074686560408201527f2066696e6520666f72207468652061646d696e2077616c6c6574000000000000606082015260800190565b60208082526031908201527f4d61726b6574706c616365206973206e6f7420616c6c6f77656420746f20747260408201527030b739b332b9103cb7bab9103a37b5b2b760791b606082015260800190565b60208082526044908201527f537461727466694d61726b6574706c6163653a2050726963652065786365656460408201527f656420746865206361702e20596f75206e65656420746f2067657420617070726060820152631bdd995960e21b608082015260a00190565b6020808252818101527f4e465420746f6b656e20636f756c646e2774206265207472616e736665726564604082015260600190565b604051601f8201601f1916810167ffffffffffffffff81118282101715615b6557615b65615dd9565b604052919050565b60008219821115615b8057615b80615d6b565b500190565b600082615b9457615b94615d81565b500490565b600181815b80851115615bd4578160001904821115615bba57615bba615d6b565b80851615615bc757918102915b93841c9390800290615b9e565b509250929050565b60006120348383600082615bf257506001610b3f565b81615bff57506000610b3f565b8160018114615c155760028114615c1f57615c3b565b6001915050610b3f565b60ff841115615c3057615c30615d6b565b50506001821b610b3f565b5060208310610133831016604e8410600b8410161715615c5e575081810a610b3f565b615c688383615b99565b8060001904821115615c7c57615c7c615d6b565b029392505050565b6000816000190483118215151615615c9e57615c9e615d6b565b500290565b600082821015615cb557615cb5615d6b565b500390565b60005b83811015615cd5578181015183820152602001615cbd565b83811115615ce4576000848401525b50505050565b600081615cf957615cf9615d6b565b506000190190565b600181811c90821680615d1557607f821691505b60208210811415615d3657634e487b7160e01b600052602260045260246000fd5b50919050565b6000600019821415615d5057615d50615d6b565b5060010190565b600082615d6657615d66615d81565b500690565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b634e487b7160e01b600052603160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b6001600160a01b038116811461102157600080fd5b801515811461102157600080fdfeb19546dff01e856fb3f010c267a7b1c60363cf8a4664e21cc89c26224620214ea2646970667358221220af50e285a58cba4135b1a7afa950fb23d859d48f0d48209e04b4d71e5f63a40e64736f6c63430008070033`
  // console.log(StartFiMarketPlace.bytecode,'StartFiMarketPlace.bytecode');
  const constructor = encodeParam(constructorTypes, constructorArgs).slice(2)
  // const bytecode = `${StartFiMarketPlace.bytecode}${constructor}`
  const bytecode = `${optimizedbytecode}${constructor}`
  const salt = formatBytes32String('Startfi2021')
  // console.log({bytecode});
  // console.log({salt});
  // encodes parameter to pass as contract argument
  function encodeParam(dataType, data) {
    const abiCoder = ethers.utils.defaultAbiCoder
    return abiCoder.encode(dataType, data)
  }

  function buildCreate2Address(creatorAddress, saltHex, byteCode) {
    return `0x${ethers.utils
      .keccak256(
        `0x${['ff', creatorAddress, saltHex, ethers.utils.keccak256(byteCode)]
          .map((x) => x.replace(/0x/, ''))
          .join('')}`
      )
      .slice(-40)}`.toLowerCase()
  }

  // returns true if contract is deployed on-chain
  async function isContract(address) {
    const code = await ethers.provider.getCode(address)
    return code.slice(2).length > 0
  }

  // First see if already deployed
  const computedAddr = buildCreate2Address(factoryAddress, hexlify(salt), bytecode)
  console.log(computedAddr, 'computedAddr')
  const isDeployed = await isContract(computedAddr)
  if (!isDeployed) {
    const factory = await StartfiCreate2Deployer.attach(factoryAddress)
    const result = await (await factory.deploy(0, salt, bytecode)).wait()
    // const addr = result.events[0].args.newAddress.toLowerCase()
    console.log({ result })
    // console.log({ addr })
  }

    const staking = await StartFiStakes.attach(contracts.staking)
     await (await staking.setMarketplace(contracts.nft)).wait()
    const reputation = await StartFiReputation.attach(contracts.reputation)
     await (await reputation.grantRole("0x9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6",computedAddr)).wait()
   
  
}

module.exports.tags = ['StartFiMarketPlace']
